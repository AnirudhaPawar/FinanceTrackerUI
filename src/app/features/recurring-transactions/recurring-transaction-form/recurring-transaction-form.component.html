<mat-card class="user-card">
  <div class="user-header">
    <h2 class="section-title">{{ editing ? 'Edit' : 'New' }} Recurring Transaction</h2>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="user-form">

    <!-- Category ID -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Category</mat-label>
      <mat-select formControlName="categoryId" required>
        <mat-option [value]="null">-- Select Category --</mat-option>
        <mat-option *ngFor="let category of categories" [value]="category.id">
          {{ category.name }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="form.get('categoryId')?.hasError('required')">
        Category is required.
      </mat-error>
    </mat-form-field>

    <!-- Type -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Type</mat-label>
      <mat-select formControlName="type" required>
        <mat-option [value]="null">Select type</mat-option>
        <mat-option value="income">Income</mat-option>
        <mat-option value="expense">Expense</mat-option>
      </mat-select>
      <mat-error *ngIf="form.get('type')?.hasError('required')">
        Type is required.
      </mat-error>
    </mat-form-field>

    <!-- Amount -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Amount</mat-label>
      <input matInput type="number" formControlName="amount" required />
      <mat-error *ngIf="form.get('amount')?.hasError('required')">
        Amount is required.
      </mat-error>
    </mat-form-field>

    <!-- Note -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Note</mat-label>
      <input matInput type="text" formControlName="note" />
    </mat-form-field>

    <!-- Frequency -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Frequency</mat-label>
      <mat-select formControlName="frequency" required>
        <mat-option [value]="null">Select frequency</mat-option>
        <mat-option value="DAILY">Daily</mat-option>
        <mat-option value="WEEKLY">Weekly</mat-option>
        <mat-option value="MONTHLY">Monthly</mat-option>
        <mat-option value="YEARLY">Yearly</mat-option>
      </mat-select>
      <mat-error *ngIf="form.get('frequency')?.hasError('required')">
        Frequency is required.
      </mat-error>
    </mat-form-field>

    <!-- Start Date -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Start Date</mat-label>
      <input matInput type="date" formControlName="startDate" required />
      <mat-error *ngIf="form.get('startDate')?.hasError('required')">
        Start Date is required.
      </mat-error>
    </mat-form-field>

    <!-- End Date -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>End Date</mat-label>
      <input matInput type="date" formControlName="endDate" />
    </mat-form-field>

    <!-- Next Due Date -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Next Due Date</mat-label>
      <input matInput type="date" formControlName="nextDueDate" required />
      <mat-error *ngIf="form.get('nextDueDate')?.hasError('required')">
        Next Due Date is required.
      </mat-error>
    </mat-form-field>

    <!-- Active Checkbox -->
    <mat-checkbox formControlName="active">Active</mat-checkbox>

    <div class="form-actions">
      <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">
        Save
      </button>
    </div>
  </form>
</mat-card>
