<mat-card class="user-card">
  <div class="user-header">
    <h2 class="section-title">Recurring Transactions</h2>
    <button mat-raised-button color="primary" (click)="add()">
      <mat-icon>add</mat-icon> Add New
    </button>
  </div>

  <mat-table [dataSource]="transactions" class="mat-elevation-z2 full-width-table" *ngIf="transactions?.length; else noData">

    <!-- Category Column -->
    <ng-container matColumnDef="category">
      <mat-header-cell *matHeaderCellDef>Category</mat-header-cell>
      <mat-cell *matCellDef="let rt">{{ rt.categoryName }}</mat-cell>
    </ng-container>

    <!-- Amount Column -->
    <ng-container matColumnDef="amount">
      <mat-header-cell *matHeaderCellDef>Amount</mat-header-cell>
      <mat-cell *matCellDef="let rt">{{ rt.amount | currency }}</mat-cell>
    </ng-container>

    <!-- Type Column -->
    <ng-container matColumnDef="type">
      <mat-header-cell *matHeaderCellDef>Type</mat-header-cell>
      <mat-cell *matCellDef="let rt">{{ rt.type }}</mat-cell>
    </ng-container>

    <!-- Frequency Column -->
    <ng-container matColumnDef="frequency">
      <mat-header-cell *matHeaderCellDef>Frequency</mat-header-cell>
      <mat-cell *matCellDef="let rt">{{ rt.frequency }}</mat-cell>
    </ng-container>

    <!-- Next Due Column -->
    <ng-container matColumnDef="nextDueDate">
      <mat-header-cell *matHeaderCellDef>Next Due</mat-header-cell>
      <mat-cell *matCellDef="let rt">{{ rt.nextDueDate | date:'mediumDate' }}</mat-cell>
    </ng-container>

    <!-- Actions Column -->
    <ng-container matColumnDef="actions">
      <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
      <mat-cell *matCellDef="let rt">
        <button mat-icon-button color="accent" (click)="edit(rt.id!)">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button color="warn" (click)="delete(rt.id!)" aria-label="Delete">
          <mat-icon>delete</mat-icon>
        </button>
      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
  </mat-table>

  <ng-template #noData>
    <p class="no-data">No recurring transactions found.</p>
  </ng-template>
</mat-card>
